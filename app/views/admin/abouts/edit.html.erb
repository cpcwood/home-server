<%= render partial: "layouts/section_title", locals: {title: 'About', subtitle: 'Admin edit'} %>

<%= form_with(model: [:admin, @about], method: "put") do |f| %>
  <% image = @about.profile_image %>

  <div class="embedded-form-entry-container">
    <div class="input-label embedded-label">
      Current profile image:
    </div>
    <div class="embedded-current-value">
      <%= image_file_name(image: image, default_name: 'no image') %>
    </div>
  </div>

  <div class="embedded-form-entry-container">
    <% if image.image_file.attached? %>
      <%= image_tag(image.image_file, class: 'embedded-cover-image')%>
    <% end %>
  </div>

  <div class="embedded-form-entry-container">
    <div class="embedded-full-width embedded-form-note small-font">
      <strong>Note:</strong> Images will be resized to <%= image.x_dim %>px wide and cropped to <%= image.y_dim %>px tall. Accepted image formats are jpeg and png.
    </div>
  </div>

  <div class="embedded-form-entry-container">
    <%= f.label(:update, 'Update image:', class: 'input-label embedded-label') %>
    <%= f.file_field(:update, accept: 'image/png,image/jpeg', class: 'input-box embedded-no-border', id: "image-update-#{image.description}") %>
  </div>

  <div class="embedded-form-entry-container">
    <%= f.label(:reset, 'Remove image:', class: 'input-label embedded-label') %>
    <%= f.check_box(:reset, class: 'input-check-box', id: "image-reset-#{image.description}") %>
  </div>

  <div class="embedded-form-entry-container">
    <%= f.label(:name, 'Name:', class: 'input-label embedded-label') %>
    <%= f.text_field(:name, class: 'input-box embedded-input-box', placeholder: 'about me name', value: @about.name) %>
  </div>

  <div class="embedded-form-entry-container">
    <%= f.label(:about_me, 'About me:', class: 'input-label embedded-label') %>
    <%= f.text_area(:name, class: 'input-box embedded-input-box embedded-text-area', placeholder: 'Add about me text (you can use markdown)...', value: @about.about_me) %>
  </div>

  <div class="embedded-form-entry-container">
  <div class="form-submit-container">
    <%= f.submit("Update About", class: 'input-submit') %>
  </div>
  <div class="default-loader"></div>
  </div>

<% end %>