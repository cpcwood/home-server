<%= render partial: "layouts/section_title", locals: {title: 'About', subtitle: 'Admin edit'} %>

<%= form_with(model: [:admin, @about], method: "put") do |f| %>
  <% image = @about.profile_image %>

  <div class="embedded_form_entry_container">
    <div class="input_label embedded_label">
      Current profile image:
    </div>
    <div class="embedded_current_value">
      <%= image_file_name(image: image, default_name: 'no image') %>
    </div>
  </div>

  <div class="embedded_form_entry_container">
    <% if image.image_file.attached? %>
      <%= image_tag(image.image_file, class: 'embedded_cover_image')%>
    <% end %>
  </div>

  <div class="embedded_form_entry_container">
    <div class="embedded_full_width embedded_form_note small-font">
      <strong>Note:</strong> Images will be resized to <%= image.x_dim %>px wide and cropped to <%= image.y_dim %>px tall. Accepted image formats are jpeg and png.
    </div>
  </div>

  <div class="embedded_form_entry_container">
    <%= f.label(:update, 'Update image:', class: 'input_label embedded_label') %>
    <%= f.file_field(:update, accept: 'image/png,image/jpeg', class: 'input_box embedded_no_border', id: "image_update_#{image.description}") %>
  </div>

  <div class="embedded_form_entry_container">
    <%= f.label(:reset, 'Reset to defaults:', class: 'input_label embedded_label') %>
    <%= f.check_box(:reset, class: 'input_check_box', id: "image_reset_#{image.description}") %>
  </div>

  <div class="embedded_form_entry_container">
    <%= f.label(:name, 'Name:', class: 'input_label embedded_label') %>
    <%= f.text_field(:name, class: 'input_box embedded_input_box', placeholder: 'about me name', value: @about.name) %>
  </div>

  <div class="embedded_form_entry_container">
    <%= f.label(:about_me, 'About me:', class: 'input_label embedded_label') %>
    <%= f.text_area(:name, class: 'input_box embedded_input_box', placeholder: 'Add about me text (you can use markdown)...', value: @about.about_me) %>
  </div>

  <div class="embedded_form_entry_container">
  <div class="form_submit_container">
    <%= f.submit("Update About", class: 'input_submit') %>
  </div>
  <div class="default_loader"></div>
  </div>

<% end %>