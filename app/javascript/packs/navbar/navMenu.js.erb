export default function navMenuClick() {
  var hamburgerContainer = document.querySelector('.hamburger_container')
  var screenCover = document.querySelector('.nav_screen_cover')
  var navSidebar = document.querySelector('.nav_sidebar')

  var toggleMenu = () => {
    if (navSidebar.classList.contains('sidebar_open')) {
      navSidebar.classList.remove('sidebar_open')
      hamburgerContainer.classList.remove('clicked')
      hamburgerContainer.classList.add('reset_animation')
    } else {
      navSidebar.classList.add('sidebar_open')
      hamburgerContainer.classList.add('clicked')
      hamburgerContainer.classList.remove('reset_animation')
    }
  }

  hamburgerContainer.addEventListener('click', toggleMenu)
  screenCover.addEventListener('click', toggleMenu)

  document.addEventListener('turbolinks:before-cache', () => {
    hamburgerContainer.removeEventListener('click', toggleMenu)
    screenCover.removeEventListener('click', toggleMenu)
  })
}