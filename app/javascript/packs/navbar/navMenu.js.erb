export default function navMenuClick() {
  var hamburgerContainer = document.querySelector('.hamburger_container')
  var screenCover = document.querySelector('.nav_screen_cover')
  var navSidebar = document.querySelector('.nav_sidebar')

  function toggleNavMenu() {
    if (navSidebar.classList.contains('sidebar_open')) {
      navSidebar.classList.remove('sidebar_open')
      hamburgerContainer.classList.remove('clicked')
      hamburgerContainer.classList.add('reset_animation')
    } else {
      navSidebar.classList.add('sidebar_open')
      hamburgerContainer.classList.add('clicked')
      hamburgerContainer.classList.remove('reset_animation')
    }
  }

  hamburgerContainer.addEventListener('click', toggleNavMenu)
  screenCover.addEventListener('click', toggleNavMenu)

  function cleanUpToggleNavMenu() {
    if (navSidebar.classList.contains('sidebar_open')) {
      navSidebar.classList.remove('sidebar_open')
      hamburgerContainer.classList.remove('clicked')
    }
    hamburgerContainer.removeEventListener('click', toggleNavMenu)
    screenCover.removeEventListener('click', toggleNavMenu)
    document.removeEventListener('turbolinks:before-cache', cleanUpToggleNavMenu)
  }
  document.addEventListener('turbolinks:before-cache', cleanUpToggleNavMenu)
}