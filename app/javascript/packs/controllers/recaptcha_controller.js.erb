import { Controller } from "stimulus"

export default class extends Controller {
  connect() {
    var reCaptchaScript = document.createElement('script')
    window.reCaptchaOnload = () => {
      grecaptcha.render('recaptcha', {
        'sitekey' : '<%= Rails.application.credentials.recaptcha[:site_key] %>',
        'theme': 'light',
        'size': 'normal'  
      })
    }
    reCaptchaScript.src = 'https://www.google.com/recaptcha/api.js?onload=reCaptchaOnload&render=explicit'
    document.head.appendChild(reCaptchaScript)
  }

  disconnect() {
    document.head.removeChild(reCaptchaScript)
  }
}